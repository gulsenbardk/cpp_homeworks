cmake_minimum_required(VERSION 3.16.3)
project(homework_3)
set(CMAKE_CXX_STANDARD 17)
#set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}) 
#set(CMAKE_INSTALL_PREFIX ${CMAKE_SOURCE_DIR}/build)
#set(CMAKE_INSTALL_PREFIX ${CMAKE_SOURCE_DIR}/build)
set(main_header ${CMAKE_CURRENT_BINARY_DIR}/api/homework_3.h)

include_directories(${CMAKE_CURRENT_SOURCE_DIR}/src ${CMAKE_CURRENT_SOURCE_DIR}/api)
add_library(html_writer STATIC src/html_writer.cpp api/html_writer.hpp)
add_library(image_browser STATIC src/image_browser.cpp api/image_browser.hpp)

target_link_libraries(image_browser PUBLIC html_writer)

add_executable(create_image_browser src/homework_3.cpp)
target_link_libraries(create_image_browser PUBLIC image_browser html_writer) 
add_custom_target(homework_3 DEPENDS main_header)
#set_target_properties(create_image_browser PROPERTIES PUBLIC_HEADER "homework_3.h")
#generate_export_header(create_image_browser ${CMAKE_BINARY_DIR}/homework_3.h)
#install(DIRECTORY ${CMAKE_SOURCE_DIR}/api DESTINATION ${CMAKE_INSTALL_PREFIX})
#install(TARGETS create_image_browser DESTINATION ${CMAKE_CURRENT_SOURCE_DIRECTORY}/tests)
#install(FILES api/homework_3.h DESTINATION ${CMAKE_CURRENT_SOURCE_DIRECTORY}/tests)
#install(FILES api/html_writer.hpp DESTINATION ${CMAKE_CURRENT_SOURCE_DIRECTORY}/tests)
#install(FILES api/image_browser.hpp DESTINATION ${CMAKE_CURRENT_SOURCE_DIRECTORY}/tests)
#install(FILES build/libhtml_writer.a DESTINATION ${CMAKE_CURRENT_SOURCE_DIRECTORY}/tests)
#install(FILES build/libimage_browser.a DESTINATION ${CMAKE_CURRENT_SOURCE_DIRECTORY}/tests)
#install(FILES api/html_writer.hpp DESTINATION ../tests)
#install(FILES api/image_browser.hpp DESTINATION ../tests)
#install(FILES build/create_image_browser 
#        PERMISSIONS OWNER_EXECUTE OWNER_WRITE OWNER_READ
#        DESTINATION ../tests)
